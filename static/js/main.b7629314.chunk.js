(this["webpackJsonpwacho-bs-react"]=this["webpackJsonpwacho-bs-react"]||[]).push([[0],{122:function(e){e.exports=JSON.parse("{}")},123:function(e){e.exports=JSON.parse("{}")},124:function(e,t,a){},125:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),l=a(14);a(138),a(139);var i=a(9),s=a.n(i),u=a(22),d=a(23),m=a(26),p=a(24),h=a(27),E=a(25),f=a(52),y=a(53),v=a(129),b=a(141),g=a(140),N=a(130),w=a(128),x=a(135),T=a(68),O=a(127),S=function(){return function(e){var t,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return"http://localhost:3003",n.next=3,s.a.awrap(fetch("http://localhost:3003/products"));case 3:return t=n.sent,n.next=6,s.a.awrap(t.json());case 6:a=n.sent,console.log("Testing with checkout"),e({type:"LOAD_PRODUCTS",payload:a});case 9:case"end":return n.stop()}}))}},C=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t=this,a=null,n=0;return this.props.products&&this.props.products.productsFromServer&&(a=this.props.products.productsFromServer,n=this.props.products.amountToCharge,e=this.props.loadProducts),r.a.createElement("div",{id:"checkout"},r.a.createElement(b.a,{style:{width:"350px"}},r.a.createElement(b.a.Header,null,"Cart Total"),r.a.createElement(b.a.Body,null,r.a.createElement(O.a,{hover:!0,borderless:!0,size:"sm"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{onClick:function(){return t.props.loadProducts()}},"Subtotal: "),r.a.createElement("td",null,"\u20ac"," ",Number.parseFloat(n).toFixed(2).toString())),r.a.createElement("tr",null,r.a.createElement("td",null,"Shipping: "),r.a.createElement("td",null,"\u20ac 5.90")),r.a.createElement("tr",null,r.a.createElement("td",null,"Total"),r.a.createElement("td",null,r.a.createElement(w.a,{variant:"info"},"\u20ac"," ",Number.parseFloat(n+5.9).toFixed(2).toString()))))))),r.a.createElement("hr",null),r.a.createElement(b.a,{style:{width:"350px"},className:"mb-4"},r.a.createElement(b.a.Body,{className:"p-0 m-2 text-center"},r.a.createElement(T.PayPalButton,{createOrder:function(e,t){var r=[];return a.filter((function(e){return e.qty>0})).map((function(e){return r.push({_id:e._id,title:e.title,qty:e.qty})})),t.order.create({purchase_units:[{amount:{value:Number.parseFloat(n+5.9).toFixed(2).toString()}}]})},onApprove:function(t,r){return r.order.capture().then((function(r){var o;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return alert("Transaction completed by "+r.payer.name.given_name),o=[],a.filter((function(e){return e.qty>0})).map((function(e){return o.push({_id:e._id,title:e.title,qty:e.qty})})),"http://localhost:3003",c.next=6,s.a.awrap(fetch("http://localhost:3003/purchases",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({orderID:t.orderID,totalAmount:n,products:o,captureDetail:r})}));case 6:return c.next=8,s.a.awrap(e());case 8:console.log("after loading");case 9:case"end":return c.stop()}}))}))}}))))}}]),t}(n.Component),P=Object(E.b)((function(e){return e}),(function(e){return{loadProducts:function(){return e(S())}}}))(C),j=a(69),F=a.n(j),_=a(137);var D=Object(E.b)((function(e){return{showProductToast:e.products.showProductToast}}),(function(e){return{hideProductToast:function(){return e({type:"HIDE_PRODUCT_TOAST"})}}}))((function(e){var t=e.propsForToast,a=e.showProductToast,n=e.hideProductToast,o=t.image,c=t.message,l=t.title,i=t.qty;return r.a.createElement(_.a,{show:a,onClose:function(){return n()},delay:2e3,autohide:!0,"aria-live":"polite","aria-atomic":"true",style:{zIndex:1,position:"fixed",bottom:"10px",left:"10px",minHeight:"100px",minWidth:"300px"}},r.a.createElement(_.a.Header,null,r.a.createElement("img",{src:o,style:{width:"30px"},className:"rounded mr-2",alt:""}),r.a.createElement("strong",{className:"mr-auto"},l),r.a.createElement("small",null,"Quantity: ",i)),r.a.createElement(_.a.Body,null,c))})),q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleShowProductDetail=function(e){a.setState({showProductDetail:!0,selectedProduct:a.props.products.find((function(t){return t._id===e}))})},a.handleCloseProductDetail=function(){a.setState({showProductDetail:!1})},a.componentDidMount=function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(a.props.loadProducts());case 2:case"end":return e.stop()}}))},a.state={showProductDetail:!1,propsForToast:{image:null,message:null,title:null,qty:0},selectedProduct:{}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.selectedProduct,n=t.propsForToast,o=this.props,c=o.increaseQty,l=o.decreaseQty,i=o.products,s=o.fetchInProgress,u=o.amountToCharge;return r.a.createElement("div",{id:"wines"},s?r.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh"}},r.a.createElement(F.a,{type:"Puff",color:"#00BFFF",height:100,width:100})):r.a.createElement("section",{className:"container-fluid mb-3"},r.a.createElement(D,{propsForToast:n}),r.a.createElement("div",{className:"row wine-products d-flex justify-content-center bg-white pt-4"},i&&i.map((function(t){return r.a.createElement("div",{key:t._id,className:"px-2 pb-2"},r.a.createElement(v.a,{variant:"outline-info",block:!0,className:"rounded-pill my-2",onClick:function(){return e.handleShowProductDetail(t._id)}},t.title),r.a.createElement(b.a,{className:"border-0",style:{width:"180px"}},r.a.createElement("div",{className:"ml-auto"},t.qty>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{overlay:r.a.createElement(N.a,{id:"tooltip-disabled"},0===t.inventory?"Last available item added to cart":"Increase Quantity")},r.a.createElement("span",{className:"d-inline-block"},r.a.createElement(v.a,{variant:"outline-info",size:"sm",disabled:0===t.inventory,onClick:function(){c(t._id),e.setState({propsForToast:{image:t.image,message:"".concat(t.title," added to cart!"),title:t.title,qty:t.qty}})},className:"rounded-circle m-2"},r.a.createElement(f.a,{icon:y.c})))),r.a.createElement(g.a,{overlay:r.a.createElement(N.a,{id:"tooltip-disabled"},"Decrease Quantity")},r.a.createElement("span",{className:"d-inline-block"},r.a.createElement(v.a,{variant:"outline-info",size:"sm",onClick:function(){l(t._id),e.setState({propsForToast:{image:t.image,message:"".concat(t.title," removed from cart!"),title:t.title,qty:t.qty}})},className:"rounded-circle m-2"},r.a.createElement(f.a,{icon:y.b}))))),0===t.qty&&r.a.createElement(g.a,{overlay:r.a.createElement(N.a,{id:"tooltip-disabled"},0===t.inventory?"Out of stock":"Add to Cart")},r.a.createElement("span",{className:"d-inline-block"},r.a.createElement(v.a,{variant:"outline-info",size:"sm",disabled:0===t.inventory,onClick:function(){c(t._id),e.setState({propsForToast:{image:t.image,message:"".concat(t.title," added to cart!"),title:t.title,qty:t.qty}})},className:"rounded-circle m-2"},r.a.createElement(f.a,{icon:y.a}))))),r.a.createElement(b.a.Img,{variant:"top",src:t.image}),r.a.createElement(b.a.Footer,{className:"px-2 text-center"},r.a.createElement("div",{className:"border border-info rounded-pill mb-2"},"\u20ac ",parseFloat(t.price).toFixed(2)," ",t.qty>0&&r.a.createElement("span",null," ","x ",t.qty," ="," ",r.a.createElement(w.a,{pill:!0,variant:"info"},"\u20ac"," ",(parseFloat(t.price)*parseFloat(t.qty)).toFixed(2)))),r.a.createElement("div",{className:"border border-info rounded-pill"},"In-stock: ",t.inventory))),r.a.createElement("hr",null))})),u>0&&r.a.createElement(P,null))),r.a.createElement(x.a,{show:this.state.showProductDetail,onHide:this.handleCloseProductDetail,centered:!0,size:"xl",scrollable:!0},r.a.createElement(x.a.Header,{closeButton:!0},r.a.createElement(x.a.Title,null,a.title)),r.a.createElement(x.a.Body,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("img",{src:a.image,className:"card-img",alt:"Rice pitcher"})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"card-body"},r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{id:"variety",className:"list-group-item"},"Variety: ",a.variety),r.a.createElement("li",{id:"color",className:"list-group-item"},"Color: ",a.color),r.a.createElement("li",{id:"aroma",className:"list-group-item"},"Aroma: ",a.aroma),r.a.createElement("li",{id:"taste",className:"list-group-item"},"The taste is ",a.taste)),r.a.createElement("p",{id:"description",className:"card-text"},a.description),r.a.createElement("p",{className:"card-text"},r.a.createElement("small",{id:"alcohol",className:"text-muted"},"Alcohol: ",a.alcohol))))))),r.a.createElement(x.a.Footer,null)))}}]),t}(n.Component);Object(E.b)((function(e){return{products:e.products.productsFromServer,fetchInProgress:e.products.fetchInProgress,amountToCharge:e.products.amountToCharge}}),(function(e){return{loadProducts:function(){return e((function(e){var t,a;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,s.a.awrap(fetch("http://localhost:3003/products"));case 3:return t=n.sent,n.next=6,s.a.awrap(t.json());case 6:a=n.sent,e({type:"LOAD_PRODUCTS",payload:a});case 8:case"end":return n.stop()}}))}))},increaseQty:function(t){return e(function(e){return{type:"INCREASE_QTY",payload:e}}(t))},decreaseQty:function(t){return e(function(e){return{type:"DECREASE_QTY",payload:e}}(t))}}}))(q),a(72);a(73);a(74),a(121);var k=a(131),I=a(132),A=a(76),B=a(133),Q=a(134);a(75);a(78);var R=a(77),H=a(136),U=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState({quantity:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.inventory,r=t._id,o=t.quantity;n=(n=parseInt(n)+parseInt(o)).toString();try{fetch("http://localhost:3003/products",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,inventory:n})}).then((function(e){return e.json()})).then((function(e){a.setState({quantity:"",inventory:n})}))}catch(c){alert("Something went wrong!")}},a.state=a.props.product,a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.image,o=t.inventory,c=t.quantity;return r.a.createElement(I.a,null,r.a.createElement("div",{className:"col-4 px-0 mb-2"},r.a.createElement(B.a,{style:{width:"100%"},src:n,rounded:!0})),r.a.createElement("div",{className:"col-8 px-0 mb-2"},r.a.createElement(b.a,null,r.a.createElement(b.a.Body,null,r.a.createElement(b.a.Title,null,a)),r.a.createElement(Q.a,{className:"list-group-flush"},r.a.createElement(R.a,null,"Current Inventory: ",o),r.a.createElement(R.a,null,r.a.createElement(H.a,{onSubmit:function(t){e.handleSubmit(t)}},r.a.createElement(H.a.Group,null,r.a.createElement(I.a,null,r.a.createElement(A.a,{xs:12,className:"mb-2"},r.a.createElement(H.a.Control,{onChange:this.handleChange,value:c,type:"number",min:"1",max:"20",required:!0,placeholder:"New Stock"})),r.a.createElement(A.a,{xs:12},r.a.createElement(v.a,{type:"submit",block:!0,variant:"outline-info"},"Update"))),r.a.createElement(w.a,{className:"my-2",style:{width:"100%"},pill:!0,variant:"info"},"This will add to current inventory"))))))))}},{key:"componentDidMount",value:function(){this.setState({quantity:""})}}]),t}(n.Component),z=a(81);function J(){var e=Object(n.useState)(!1),t=Object(z.a)(e,2),a=t[0],o=t[1],c=function(){return o(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{className:""},r.a.createElement("div",{className:"vh-100 d-flex justify-content-center align-items-center"},r.a.createElement(v.a,{variant:"primary",onClick:function(){return o(!0)}},"Login"))),r.a.createElement(x.a,{show:a,onHide:c},r.a.createElement(x.a.Header,{closeButton:!0},r.a.createElement(x.a.Title,null,"Modal heading")),r.a.createElement(x.a.Body,null,"Woohoo, you're reading this text in a modal!"),r.a.createElement(x.a.Footer,null,r.a.createElement(v.a,{variant:"secondary",onClick:c},"Close"),r.a.createElement(v.a,{variant:"primary",onClick:c},"Save Changes"))))}n.Component,a(79);a(122),a(123);var L=a(32),M=a(80),Y=a(54),V=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||L.d,W=Object(L.c)({products:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=a.productsFromServer;switch(n.type){case"LOAD_PRODUCTS":return{productsFromServer:n.payload,fetchInProgress:!1,showProductToast:!1};case"INCREASE_QTY":return(e=r.find((function(e){return e._id===n.payload}))).qty++,e.inventory--,t=r.reduce((function(e,t){return e+t.price*t.qty}),0),Object(Y.a)({},a,{productsFromServer:r,amountToCharge:t,showProductToast:!0});case"DECREASE_QTY":return(e=r.find((function(e){return e._id===n.payload}))).qty--,e.inventory++,t=r.reduce((function(e,t){return e+t.price*t.qty}),0),Object(Y.a)({},a,{productsFromServer:r,amountToCharge:t,showProductToast:!0});case"HIDE_PRODUCT_TOAST":return Object(Y.a)({},a,{showProductToast:!1});default:return a}}}),X=Object(L.e)(W,{products:{fetchInProgress:!0,showProductToast:!1}},V(Object(L.a)(M.a)));a(124);c.a.render(r.a.createElement(E.a,{store:X},r.a.createElement(l.a,null,r.a.createElement("div",null,"Hi"))),document.getElementById("root"))},72:function(e,t,a){e.exports=a.p+"static/media/philosophy.fa68be64.jpg"},73:function(e,t,a){e.exports=a.p+"static/media/sociology.d71a8e1e.jpg"},75:function(e,t,a){e.exports=a.p+"static/media/aboutMeImg.09f4b4ec.jpg"},78:function(e,t,a){e.exports=a.p+"static/media/myDreamImg.ad029bf8.jpg"},79:function(e,t,a){e.exports=a.p+"static/media/header-loop.f3bd3584.mp4"},82:function(e,t,a){e.exports=a(125)}},[[82,1,2]]]);
//# sourceMappingURL=main.b7629314.chunk.js.map